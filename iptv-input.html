<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTV URL Entry</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .input-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .input-type-btn {
            flex: 1;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .input-type-btn.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: white;
            transform: scale(1.02);
        }

        .input-type-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .input-section {
            display: none;
        }

        .input-section.active {
            display: block;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 24px;
            font-weight: 600;
        }

        .subtitle {
            text-align: center;
            opacity: 0.8;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        input[type="url"],
        input[type="text"],
        input[type="password"] {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            box-sizing: border-box;
            backdrop-filter: blur(5px);
        }

        input[type="url"]::placeholder,
        input[type="text"]::placeholder,
        input[type="password"]::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        input[type="url"]:focus,
        input[type="text"]:focus,
        input[type="password"]:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.8);
            background: rgba(255, 255, 255, 0.2);
        }

        .button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(238, 90, 36, 0.4);
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(238, 90, 36, 0.6);
        }

        .button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 4px 15px rgba(238, 90, 36, 0.4);
        }

        .status {
            margin-top: 20px;
            padding: 12px 16px;
            border-radius: 8px;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
            min-height: 20px;
        }

        .status.success {
            background: rgba(39, 174, 96, 0.2);
            border: 1px solid rgba(39, 174, 96, 0.4);
            color: #2ecc71;
        }

        .status.error {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid rgba(231, 76, 60, 0.4);
            color: #e74c3c;
        }

        .status.info {
            background: rgba(52, 152, 219, 0.2);
            border: 1px solid rgba(52, 152, 219, 0.4);
            color: #3498db;
        }

        .status.warning {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.4);
            color: #f39c12;
        }

        .examples {
            margin-top: 20px;
            font-size: 12px;
            opacity: 0.7;
        }

        .examples h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
        }

        .examples ul {
            margin: 0;
            padding-left: 20px;
        }

        .examples li {
            margin-bottom: 4px;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .rate-limit-notice {
            margin-top: 15px;
            padding: 10px;
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 8px;
            font-size: 11px;
            text-align: center;
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .container {
                padding: 20px;
            }
        }

        /* Loading spinner animation */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            vertical-align: middle;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    <script>
        // Language translations
        const translations = {
            it: {
                title: 'ğŸ“º IPTV Guarda',
                subtitle: 'Inserisci URL della playlist IPTV per il tuo dispositivo',
                urlLabel: 'URL Lista IPTV',
                urlPlaceholder: 'https://esempio.com/lista.m3u8',
                sendButton: 'Invia al Dispositivo',
                sending: 'Invio al Dispositivo...',
                spamProtection: 'ğŸ›¡ï¸ Protezione Anti-Spam: Limitato a 10 sessioni simultanee. Le sessioni scadono dopo 10 minuti.',
                supportedFormats: 'Formati supportati:',
                format1: 'Liste M3U/M3U8 (.m3u, .m3u8)',
                format2: 'URL API Xtream Codes',
                format3: 'URL di streaming diretto',
                format4: 'Endpoint API Panel',
                legalNotice: 'âš–ï¸ Avviso Legale: Questo strumento Ã¨ progettato per accedere a contenuti IPTV di proprietÃ  legale. Gli utenti sono responsabili di assicurarsi di avere l\'autorizzazione appropriata per accedere a qualsiasi contenuto di streaming. Non utilizzare questo strumento per accedere a materiale protetto da copyright senza autorizzazione.',
                errorNoSession: 'Errore: Nessun ID di sessione trovato nell\'URL',
                errorInvalidSession: 'Errore: Formato ID sessione non valido',
                sessionInfo: 'Sessione: ',
                rateLimited: 'Limite raggiunto. Attendere',
                seconds: 'secondi.',
                enterUrl: 'Inserisci un URL',
                invalidUrl: 'URL non valido: ',
                onlyHttpAllowed: 'Sono consentiti solo URL HTTP e HTTPS',
                localhostBlocked: 'URL localhost e privati non sono consentiti',
                invalidUrlFormat: 'Formato URL non valido',
                urlAccepted: 'URL accettato (nessun pattern IPTV rilevato)',
                validIptvUrl: 'URL IPTV valido',
                noIptvWarning: 'L\'URL non contiene pattern IPTV comuni. Continuare comunque?',
                sendingToDevice: 'Invio URL al tuo dispositivo...',
                successMessage: 'âœ… URL inviato con successo! Controlla il tuo dispositivo.',
                successClose: 'âœ… Fatto! Puoi chiudere questa scheda e controllare il tuo dispositivo.',
                errorSending: 'Errore: Impossibile inviare l\'URL. Riprova.',
                sessionAlreadyUsed: 'âš ï¸ Questa sessione Ã¨ giÃ  stata utilizzata. Scansiona un nuovo codice QR.',
                checkingSession: 'Controllo stato sessione...',
                directUrl: 'URL Diretto',
                xtreamCodes: 'Codici Xtream',
                serverUrl: 'URL Server',
                serverUrlPlaceholder: 'http://esempio.com:8080',
                username: 'Nome utente',
                usernamePlaceholder: 'Il tuo nome utente',
                password: 'Password',
                passwordPlaceholder: 'La tua password',
                converting: 'Conversione in URL IPTV...',
                invalidXtream: 'Compila tutti i campi Xtream Codes',
                validatingUrl: 'Validazione URL...',
                urlValidationFailed: 'âŒ Validazione URL fallita. Il server ha restituito: ',
                serverNotResponding: 'âŒ Server non risponde o credenziali non valide',
                urlValidated: 'âœ… URL validato con successo'
            },
            ja: {
                title: 'ğŸ“º IPTVã‚¦ã‚©ãƒƒãƒ',
                subtitle: 'ãƒ‡ãƒã‚¤ã‚¹ç”¨ã®IPTVãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆURLã‚’å…¥åŠ›',
                urlLabel: 'IPTVãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆURL',
                urlPlaceholder: 'https://example.com/playlist.m3u8',
                sendButton: 'ãƒ‡ãƒã‚¤ã‚¹ã«é€ä¿¡',
                sending: 'ãƒ‡ãƒã‚¤ã‚¹ã«é€ä¿¡ä¸­...',
                spamProtection: 'ğŸ›¡ï¸ ã‚¹ãƒ‘ãƒ ä¿è­·ï¼š10ã®åŒæ™‚ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«åˆ¶é™ã€‚ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯10åˆ†å¾Œã«æœŸé™åˆ‡ã‚Œã€‚',
                supportedFormats: 'ã‚µãƒãƒ¼ãƒˆå½¢å¼:',
                format1: 'M3U/M3U8ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆ (.m3u, .m3u8)',
                format2: 'Xtream Codes API URL',
                format3: 'ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°URL',
                format4: 'ãƒ‘ãƒãƒ«APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ',
                legalNotice: 'âš–ï¸ æ³•çš„é€šçŸ¥ï¼šã“ã®ãƒ„ãƒ¼ãƒ«ã¯åˆæ³•çš„ã«æ‰€æœ‰ã•ã‚Œã¦ã„ã‚‹IPTVã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚',
                errorNoSession: 'ã‚¨ãƒ©ãƒ¼ï¼šURLã«ã‚»ãƒƒã‚·ãƒ§ãƒ³IDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“',
                errorInvalidSession: 'ã‚¨ãƒ©ãƒ¼ï¼šç„¡åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³IDå½¢å¼',
                sessionInfo: 'ã‚»ãƒƒã‚·ãƒ§ãƒ³: ',
                rateLimited: 'ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã€‚å¾…ã£ã¦ãã ã•ã„',
                seconds: 'ç§’ã€‚',
                enterUrl: 'URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
                invalidUrl: 'ç„¡åŠ¹ãªURL: ',
                onlyHttpAllowed: 'HTTPã¨HTTPS URLã®ã¿è¨±å¯',
                localhostBlocked: 'localhostã¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆURLã¯è¨±å¯ã•ã‚Œã¾ã›ã‚“',
                invalidUrlFormat: 'ç„¡åŠ¹ãªURLå½¢å¼',
                urlAccepted: 'URLæ‰¿èªæ¸ˆã¿ï¼ˆIPTVãƒ‘ã‚¿ãƒ¼ãƒ³æœªæ¤œå‡ºï¼‰',
                validIptvUrl: 'æœ‰åŠ¹ãªIPTV URL',
                noIptvWarning: 'URLã«ä¸€èˆ¬çš„ãªIPTVãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ',
                sendingToDevice: 'ãƒ‡ãƒã‚¤ã‚¹ã«URLã‚’é€ä¿¡ä¸­...',
                successMessage: 'âœ… URLãŒæ­£å¸¸ã«é€ä¿¡ã•ã‚Œã¾ã—ãŸï¼ãƒ‡ãƒã‚¤ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚',
                successClose: 'âœ… å®Œäº†ï¼ã“ã®ã‚¿ãƒ–ã‚’é–‰ã˜ã¦ãƒ‡ãƒã‚¤ã‚¹ã‚’ç¢ºèªã§ãã¾ã™ã€‚',
                errorSending: 'ã‚¨ãƒ©ãƒ¼ï¼šURLã‚’é€ä¿¡ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚',
                sessionAlreadyUsed: 'âš ï¸ ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚æ–°ã—ã„QRã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ãã ã•ã„ã€‚',
                checkingSession: 'ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ç¢ºèªä¸­...',
                directUrl: 'ç›´æ¥URL',
                xtreamCodes: 'Xtreamã‚³ãƒ¼ãƒ‰',
                serverUrl: 'ã‚µãƒ¼ãƒãƒ¼URL',
                serverUrlPlaceholder: 'http://example.com:8080',
                username: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å',
                usernamePlaceholder: 'ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å',
                password: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
                passwordPlaceholder: 'ã‚ãªãŸã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
                converting: 'IPTV URLã«å¤‰æ›ä¸­...',
                invalidXtream: 'ã™ã¹ã¦ã®Xtream Codesãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
                validatingUrl: 'URLæ¤œè¨¼ä¸­...',
                urlValidationFailed: 'âŒ URLæ¤œè¨¼å¤±æ•—ã€‚ã‚µãƒ¼ãƒãƒ¼ãŒå¿œç­”: ',
                serverNotResponding: 'âŒ ã‚µãƒ¼ãƒãƒ¼ãŒå¿œç­”ã—ãªã„ã‹èªè¨¼æƒ…å ±ãŒç„¡åŠ¹',
                urlValidated: 'âœ… URLæ¤œè¨¼æˆåŠŸ'
            },
            pt: {
                title: 'ğŸ“º IPTV Assistir',
                subtitle: 'Digite a URL da lista IPTV para seu dispositivo',
                urlLabel: 'URL da Lista IPTV',
                urlPlaceholder: 'https://exemplo.com/lista.m3u8',
                sendButton: 'Enviar para Dispositivo',
                sending: 'Enviando para Dispositivo...',
                spamProtection: 'ğŸ›¡ï¸ ProteÃ§Ã£o Anti-Spam: Limitado a 10 sessÃµes simultÃ¢neas. SessÃµes expiram apÃ³s 10 minutos.',
                supportedFormats: 'Formatos suportados:',
                format1: 'Listas M3U/M3U8 (.m3u, .m3u8)',
                format2: 'URLs da API Xtream Codes',
                format3: 'URLs de streaming direto',
                format4: 'Endpoints da API do Painel',
                legalNotice: 'âš–ï¸ Aviso Legal: Esta ferramenta Ã© projetada para acessar conteÃºdo IPTV de propriedade legal. Os usuÃ¡rios sÃ£o responsÃ¡veis por garantir que tÃªm autorizaÃ§Ã£o adequada para acessar qualquer conteÃºdo de streaming. NÃ£o use esta ferramenta para acessar material protegido por direitos autorais sem permissÃ£o.',
                errorNoSession: 'Erro: Nenhum ID de sessÃ£o encontrado na URL',
                errorInvalidSession: 'Erro: Formato de ID de sessÃ£o invÃ¡lido',
                sessionInfo: 'SessÃ£o: ',
                rateLimited: 'Limite atingido. Por favor aguarde',
                seconds: 'segundos.',
                enterUrl: 'Por favor, insira uma URL',
                invalidUrl: 'URL invÃ¡lida: ',
                onlyHttpAllowed: 'Apenas URLs HTTP e HTTPS sÃ£o permitidas',
                localhostBlocked: 'URLs localhost e privadas nÃ£o sÃ£o permitidas',
                invalidUrlFormat: 'Formato de URL invÃ¡lido',
                urlAccepted: 'URL aceita (nenhum padrÃ£o IPTV detectado)',
                validIptvUrl: 'URL IPTV vÃ¡lida',
                noIptvWarning: 'A URL nÃ£o contÃ©m padrÃµes IPTV comuns. Continuar mesmo assim?',
                sendingToDevice: 'Enviando URL para seu dispositivo...',
                successMessage: 'âœ… URL enviada com sucesso! Verifique seu dispositivo.',
                successClose: 'âœ… Pronto! VocÃª pode fechar esta aba e verificar seu dispositivo.',
                errorSending: 'Erro: NÃ£o foi possÃ­vel enviar a URL. Por favor, tente novamente.',
                sessionAlreadyUsed: 'âš ï¸ Esta sessÃ£o jÃ¡ foi usada. Por favor, escaneie um novo cÃ³digo QR.',
                checkingSession: 'Verificando status da sessÃ£o...',
                directUrl: 'URL Direta',
                xtreamCodes: 'CÃ³digos Xtream',
                serverUrl: 'URL do Servidor',
                serverUrlPlaceholder: 'http://exemplo.com:8080',
                username: 'Nome de usuÃ¡rio',
                usernamePlaceholder: 'Seu nome de usuÃ¡rio',
                password: 'Senha',
                passwordPlaceholder: 'Sua senha',
                converting: 'Convertendo para URL IPTV...',
                invalidXtream: 'Por favor, preencha todos os campos do Xtream Codes',
                validatingUrl: 'Validando URL...',
                urlValidationFailed: 'âŒ ValidaÃ§Ã£o de URL falhou. Servidor retornou: ',
                serverNotResponding: 'âŒ Servidor nÃ£o responde ou credenciais invÃ¡lidas',
                urlValidated: 'âœ… URL validada com sucesso'
            },
            en: {
                title: 'ğŸ“º IPTV Watch',
                subtitle: 'Enter IPTV playlist URL for your device',
                urlLabel: 'IPTV Playlist URL',
                urlPlaceholder: 'https://example.com/playlist.m3u8',
                sendButton: 'Send to Device',
                sending: 'Sending to Device...',
                spamProtection: 'ğŸ›¡ï¸ Spam Protection: Limited to 10 simultaneous sessions. Sessions expire after 10 minutes.',
                supportedFormats: 'Supported formats:',
                format1: 'M3U/M3U8 playlists (.m3u, .m3u8)',
                format2: 'Xtream Codes API URLs',
                format3: 'Direct streaming URLs',
                format4: 'Panel API endpoints',
                legalNotice: 'âš–ï¸ Legal Notice: This tool is designed for accessing legally owned IPTV content. Users are responsible for ensuring they have proper authorization to access any streaming content. Do not use this tool for accessing copyrighted material without permission.',
                errorNoSession: 'Error: No session ID found in URL',
                errorInvalidSession: 'Error: Invalid session ID format',
                sessionInfo: 'Session: ',
                rateLimited: 'Rate limited. Please wait',
                seconds: 'seconds.',
                enterUrl: 'Please enter a URL',
                invalidUrl: 'Invalid URL: ',
                onlyHttpAllowed: 'Only HTTP and HTTPS URLs are allowed',
                localhostBlocked: 'Localhost and private URLs are not allowed',
                invalidUrlFormat: 'Invalid URL format',
                urlAccepted: 'URL accepted (no IPTV patterns detected)',
                validIptvUrl: 'Valid IPTV URL',
                noIptvWarning: 'URL does not contain common IPTV patterns. Continue anyway?',
                sendingToDevice: 'Sending URL to your device...',
                successMessage: 'âœ… URL sent successfully! Check your device.',
                successClose: 'âœ… Done! You can close this tab and check your device.',
                errorSending: 'Error: Could not send URL. Please try again.',
                sessionAlreadyUsed: 'âš ï¸ This session has already been used. Please scan a new QR code.',
                checkingSession: 'Checking session status...',
                directUrl: 'Direct URL',
                xtreamCodes: 'Xtream Codes',
                serverUrl: 'Server URL',
                serverUrlPlaceholder: 'http://example.com:8080',
                username: 'Username',
                usernamePlaceholder: 'Your username',
                password: 'Password',
                passwordPlaceholder: 'Your password',
                converting: 'Converting to IPTV URL...',
                invalidXtream: 'Please fill in all Xtream Codes fields',
                validatingUrl: 'Validating URL...',
                urlValidationFailed: 'âŒ URL validation failed. Server returned: ',
                serverNotResponding: 'âŒ Server not responding or credentials invalid',
                urlValidated: 'âœ… URL validated successfully'
            },
            es: {
                title: 'ğŸ“º IPTV Ver',
                subtitle: 'Ingrese la URL de la lista IPTV para su dispositivo',
                urlLabel: 'URL de Lista IPTV',
                urlPlaceholder: 'https://ejemplo.com/lista.m3u8',
                sendButton: 'Enviar al Dispositivo',
                sending: 'Enviando al Dispositivo...',
                spamProtection: 'ğŸ›¡ï¸ ProtecciÃ³n Anti-Spam: Limitado a 10 sesiones simultÃ¡neas. Las sesiones expiran despuÃ©s de 10 minutos.',
                supportedFormats: 'Formatos soportados:',
                format1: 'Listas M3U/M3U8 (.m3u, .m3u8)',
                format2: 'URLs de API Xtream Codes',
                format3: 'URLs de streaming directo',
                format4: 'Endpoints de API Panel',
                legalNotice: 'âš–ï¸ Aviso Legal: Esta herramienta estÃ¡ diseÃ±ada para acceder a contenido IPTV de propiedad legal. Los usuarios son responsables de asegurarse de tener la autorizaciÃ³n adecuada para acceder a cualquier contenido de streaming. No use esta herramienta para acceder a material con derechos de autor sin permiso.',
                errorNoSession: 'Error: No se encontrÃ³ ID de sesiÃ³n en la URL',
                errorInvalidSession: 'Error: Formato de ID de sesiÃ³n invÃ¡lido',
                sessionInfo: 'SesiÃ³n: ',
                rateLimited: 'LÃ­mite alcanzado. Por favor espere',
                seconds: 'segundos.',
                enterUrl: 'Por favor ingrese una URL',
                invalidUrl: 'URL invÃ¡lida: ',
                onlyHttpAllowed: 'Solo se permiten URLs HTTP y HTTPS',
                localhostBlocked: 'No se permiten URLs localhost y privadas',
                invalidUrlFormat: 'Formato de URL invÃ¡lido',
                urlAccepted: 'URL aceptada (no se detectaron patrones IPTV)',
                validIptvUrl: 'URL IPTV vÃ¡lida',
                noIptvWarning: 'La URL no contiene patrones IPTV comunes. Â¿Continuar de todos modos?',
                sendingToDevice: 'Enviando URL a su dispositivo...',
                successMessage: 'âœ… Â¡URL enviada con Ã©xito! Verifique su dispositivo.',
                successClose: 'âœ… Â¡Listo! Puede cerrar esta pestaÃ±a y verificar su dispositivo.',
                errorSending: 'Error: No se pudo enviar la URL. Por favor intente de nuevo.',
                sessionAlreadyUsed: 'âš ï¸ Esta sesiÃ³n ya ha sido utilizada. Por favor escanee un nuevo cÃ³digo QR.',
                checkingSession: 'Verificando estado de la sesiÃ³n...',
                directUrl: 'URL Directa',
                xtreamCodes: 'CÃ³digos Xtream',
                serverUrl: 'URL del Servidor',
                serverUrlPlaceholder: 'http://ejemplo.com:8080',
                username: 'Usuario',
                usernamePlaceholder: 'Su nombre de usuario',
                password: 'ContraseÃ±a',
                passwordPlaceholder: 'Su contraseÃ±a',
                converting: 'Convirtiendo a URL IPTV...',
                invalidXtream: 'Por favor complete todos los campos de Xtream Codes',
                validatingUrl: 'Validando URL...',
                urlValidationFailed: 'âŒ ValidaciÃ³n de URL fallÃ³. El servidor devolviÃ³: ',
                serverNotResponding: 'âŒ Servidor no responde o credenciales invÃ¡lidas',
                urlValidated: 'âœ… URL validada exitosamente'
            },
            fr: {
                title: 'ğŸ“º IPTV Regarder',
                subtitle: "Entrez l'URL de la liste IPTV pour votre appareil",
                urlLabel: 'URL de la Liste IPTV',
                urlPlaceholder: 'https://exemple.com/liste.m3u8',
                sendButton: "Envoyer Ã  l'Appareil",
                sending: "Envoi Ã  l'Appareil...",
                spamProtection: 'ğŸ›¡ï¸ Protection Anti-Spam: LimitÃ© Ã  10 sessions simultanÃ©es. Les sessions expirent aprÃ¨s 10 minutes.',
                supportedFormats: 'Formats supportÃ©s:',
                format1: 'Listes M3U/M3U8 (.m3u, .m3u8)',
                format2: 'URLs API Xtream Codes',
                format3: 'URLs de streaming direct',
                format4: 'Points de terminaison API Panel',
                legalNotice: "âš–ï¸ Avis LÃ©gal: Cet outil est conÃ§u pour accÃ©der au contenu IPTV lÃ©galement possÃ©dÃ©. Les utilisateurs sont responsables de s'assurer qu'ils ont l'autorisation appropriÃ©e pour accÃ©der Ã  tout contenu de streaming. N'utilisez pas cet outil pour accÃ©der Ã  du matÃ©riel protÃ©gÃ© par des droits d'auteur sans autorisation.",
                errorNoSession: 'Erreur: Aucun ID de session trouvÃ© dans l\'URL',
                errorInvalidSession: 'Erreur: Format d\'ID de session invalide',
                sessionInfo: 'Session: ',
                rateLimited: 'Limite atteinte. Veuillez attendre',
                seconds: 'secondes.',
                enterUrl: 'Veuillez entrer une URL',
                invalidUrl: 'URL invalide: ',
                onlyHttpAllowed: 'Seules les URLs HTTP et HTTPS sont autorisÃ©es',
                localhostBlocked: 'Les URLs localhost et privÃ©es ne sont pas autorisÃ©es',
                invalidUrlFormat: 'Format d\'URL invalide',
                urlAccepted: 'URL acceptÃ©e (aucun modÃ¨le IPTV dÃ©tectÃ©)',
                validIptvUrl: 'URL IPTV valide',
                noIptvWarning: "L'URL ne contient pas de modÃ¨les IPTV courants. Continuer quand mÃªme?",
                sendingToDevice: 'Envoi de l\'URL Ã  votre appareil...',
                successMessage: 'âœ… URL envoyÃ©e avec succÃ¨s! VÃ©rifiez votre appareil.',
                successClose: 'âœ… TerminÃ©! Vous pouvez fermer cet onglet et vÃ©rifier votre appareil.',
                errorSending: 'Erreur: Impossible d\'envoyer l\'URL. Veuillez rÃ©essayer.',
                sessionAlreadyUsed: 'âš ï¸ Cette session a dÃ©jÃ  Ã©tÃ© utilisÃ©e. Veuillez scanner un nouveau code QR.',
                checkingSession: 'VÃ©rification du statut de la session...',
                directUrl: 'URL Directe',
                xtreamCodes: 'Codes Xtream',
                serverUrl: 'URL du Serveur',
                serverUrlPlaceholder: 'http://exemple.com:8080',
                username: 'Nom d\'utilisateur',
                usernamePlaceholder: 'Votre nom d\'utilisateur',
                password: 'Mot de passe',
                passwordPlaceholder: 'Votre mot de passe',
                converting: 'Conversion en URL IPTV...',
                invalidXtream: 'Veuillez remplir tous les champs Xtream Codes',
                validatingUrl: 'Validation de l\'URL...',
                urlValidationFailed: 'âŒ Validation de l\'URL Ã©chouÃ©e. Le serveur a renvoyÃ©: ',
                serverNotResponding: 'âŒ Serveur ne rÃ©pond pas ou identifiants invalides',
                urlValidated: 'âœ… URL validÃ©e avec succÃ¨s'
            },
            de: {
                title: 'ğŸ“º IPTV Ansehen',
                subtitle: 'Geben Sie die IPTV-Playlist-URL fÃ¼r Ihr GerÃ¤t ein',
                urlLabel: 'IPTV-Playlist-URL',
                urlPlaceholder: 'https://beispiel.com/playlist.m3u8',
                sendButton: 'An GerÃ¤t senden',
                sending: 'An GerÃ¤t senden...',
                spamProtection: 'ğŸ›¡ï¸ Spam-Schutz: Begrenzt auf 10 gleichzeitige Sitzungen. Sitzungen laufen nach 10 Minuten ab.',
                supportedFormats: 'UnterstÃ¼tzte Formate:',
                format1: 'M3U/M3U8-Playlisten (.m3u, .m3u8)',
                format2: 'Xtream Codes API-URLs',
                format3: 'Direkte Streaming-URLs',
                format4: 'Panel-API-Endpunkte',
                legalNotice: 'âš–ï¸ Rechtlicher Hinweis: Dieses Tool ist fÃ¼r den Zugriff auf legal besessene IPTV-Inhalte konzipiert. Benutzer sind dafÃ¼r verantwortlich, sicherzustellen, dass sie die richtige Berechtigung haben, auf Streaming-Inhalte zuzugreifen. Verwenden Sie dieses Tool nicht, um ohne Erlaubnis auf urheberrechtlich geschÃ¼tztes Material zuzugreifen.',
                errorNoSession: 'Fehler: Keine Sitzungs-ID in URL gefunden',
                errorInvalidSession: 'Fehler: UngÃ¼ltiges Sitzungs-ID-Format',
                sessionInfo: 'Sitzung: ',
                rateLimited: 'Limit erreicht. Bitte warten Sie',
                seconds: 'Sekunden.',
                enterUrl: 'Bitte geben Sie eine URL ein',
                invalidUrl: 'UngÃ¼ltige URL: ',
                onlyHttpAllowed: 'Nur HTTP- und HTTPS-URLs sind erlaubt',
                localhostBlocked: 'Localhost- und private URLs sind nicht erlaubt',
                invalidUrlFormat: 'UngÃ¼ltiges URL-Format',
                urlAccepted: 'URL akzeptiert (keine IPTV-Muster erkannt)',
                validIptvUrl: 'GÃ¼ltige IPTV-URL',
                noIptvWarning: 'URL enthÃ¤lt keine gÃ¤ngigen IPTV-Muster. Trotzdem fortfahren?',
                sendingToDevice: 'URL wird an Ihr GerÃ¤t gesendet...',
                successMessage: 'âœ… URL erfolgreich gesendet! ÃœberprÃ¼fen Sie Ihr GerÃ¤t.',
                successClose: 'âœ… Fertig! Sie kÃ¶nnen diese Registerkarte schlieÃŸen und Ihr GerÃ¤t Ã¼berprÃ¼fen.',
                errorSending: 'Fehler: URL konnte nicht gesendet werden. Bitte versuchen Sie es erneut.',
                sessionAlreadyUsed: 'âš ï¸ Diese Sitzung wurde bereits verwendet. Bitte scannen Sie einen neuen QR-Code.',
                checkingSession: 'Sitzungsstatus wird Ã¼berprÃ¼ft...',
                directUrl: 'Direkte URL',
                xtreamCodes: 'Xtream Codes',
                serverUrl: 'Server-URL',
                serverUrlPlaceholder: 'http://beispiel.com:8080',
                username: 'Benutzername',
                usernamePlaceholder: 'Ihr Benutzername',
                password: 'Passwort',
                passwordPlaceholder: 'Ihr Passwort',
                converting: 'Konvertierung zu IPTV-URL...',
                invalidXtream: 'Bitte fÃ¼llen Sie alle Xtream Codes-Felder aus',
                validatingUrl: 'URL wird validiert...',
                urlValidationFailed: 'âŒ URL-Validierung fehlgeschlagen. Server gab zurÃ¼ck: ',
                serverNotResponding: 'âŒ Server antwortet nicht oder Anmeldedaten ungÃ¼ltig',
                urlValidated: 'âœ… URL erfolgreich validiert'
            }
        };

        // Function to get user's preferred language
        function getUserLanguage() {
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            if (langParam && translations[langParam]) {
                return langParam;
            }

            const browserLang = navigator.language.substring(0, 2);
            if (translations[browserLang]) {
                return browserLang;
            }

            // Default to English if no match
            return 'en';
        }

        // Get current language
        const currentLang = getUserLanguage();
        const t = translations[currentLang];

        // Update document language
        document.documentElement.lang = currentLang;
    </script>
</head>
<body>
    <div class="container">
        <h1>ğŸ“º IPTV Watch</h1>
        <div class="subtitle">Enter IPTV playlist URL for your device</div>

        <!-- Input Type Selector -->
        <div class="input-type-selector">
            <button class="input-type-btn active" id="urlBtn" onclick="switchInputType('url')">
                ğŸŒ <span id="directUrlLabel">Direct URL</span>
            </button>
            <button class="input-type-btn" id="xtreamBtn" onclick="switchInputType('xtream')">
                ğŸ”‘ <span id="xtreamCodesLabel">Xtream Codes</span>
            </button>
        </div>

        <!-- Direct URL Input Section -->
        <div class="input-section active" id="urlSection">
            <div class="form-group">
                <label for="urlInput">IPTV Playlist URL</label>
                <input
                    type="url"
                    id="urlInput"
                    placeholder="https://example.com/playlist.m3u8"
                    autocomplete="url"
                    spellcheck="false"
                >
            </div>
        </div>

        <!-- Xtream Codes Input Section -->
        <div class="input-section" id="xtreamSection">
            <div class="form-group">
                <label for="serverInput" id="serverLabel">Server URL</label>
                <input
                    type="url"
                    id="serverInput"
                    placeholder="http://example.com:8080"
                    autocomplete="url"
                    spellcheck="false"
                >
            </div>
            <div class="form-group">
                <label for="usernameInput" id="usernameLabel">Username</label>
                <input
                    type="text"
                    id="usernameInput"
                    placeholder="Your username"
                    autocomplete="username"
                    spellcheck="false"
                >
            </div>
            <div class="form-group">
                <label for="passwordInput" id="passwordLabel">Password</label>
                <input
                    type="password"
                    id="passwordInput"
                    placeholder="Your password"
                    autocomplete="current-password"
                    spellcheck="false"
                >
            </div>
        </div>

        <button class="button" onclick="sendUrl()" id="sendButton">
            Send to Device
        </button>

        <div id="status" class="status"></div>

        <div class="rate-limit-notice">
            <strong>ğŸ›¡ï¸ Spam Protection:</strong> Limited to 10 simultaneous sessions. Sessions expire after 10 minutes.
        </div>

        <div class="examples">
            <h3>Supported formats:</h3>
            <ul>
                <li>M3U/M3U8 playlists (.m3u, .m3u8)</li>
                <li>Xtream Codes API URLs</li>
                <li>Direct streaming URLs</li>
                <li>Panel API endpoints</li>
            </ul>

            <div style="margin-top: 20px; padding: 15px; background: rgba(255, 193, 7, 0.1); border: 1px solid rgba(255, 193, 7, 0.3); border-radius: 8px; font-size: 11px;">
                <strong>âš–ï¸ Legal Notice:</strong> This tool is designed for accessing legally owned IPTV content. Users are responsible for ensuring they have proper authorization to access any streaming content. Do not use this tool for accessing copyrighted material without permission.
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
        import { getDatabase, ref, set } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js';

        // Firebase configuration - Using weargb database with IPTV path
        const firebaseConfig = {
            apiKey: "AIzaSyBp8_V8jjEUq1aGuypS6VV63cFBFap0s6M",
            authDomain: "weargb.firebaseapp.com",
            databaseURL: "https://weargb-default-rtdb.firebaseio.com",
            projectId: "weargb",
            storageBucket: "weargb.firebasestorage.app",
            messagingSenderId: "480332250386",
            appId: "1:480332250386:web:9747cb"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Rate limiting state
        let submitAttempts = 0;
        const MAX_ATTEMPTS_PER_SESSION = 3;
        const RATE_LIMIT_RESET_TIME = 60000; // 1 minute
        let lastAttemptTime = 0;

        // Get session ID from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const sessionId = urlParams.get('session');

        if (!sessionId) {
            document.getElementById('status').textContent = t.errorNoSession;
            document.getElementById('status').className = 'status error';
            document.getElementById('sendButton').disabled = true;
        } else if (!isValidSessionFormat(sessionId)) {
            document.getElementById('status').textContent = t.errorInvalidSession;
            document.getElementById('status').className = 'status error';
            document.getElementById('sendButton').disabled = true;
        } else {
            document.getElementById('status').textContent = t.sessionInfo + sessionId.substring(0, 8) + '...';
            document.getElementById('status').className = 'status info';

            // Check if session has already been consumed on page load
            fetch(`https://weargb-default-rtdb.firebaseio.com/url-sessions/${sessionId}.json`)
                .then(response => response.json())
                .then(sessionData => {
                    if (sessionData && sessionData.consumed === true) {
                        document.getElementById('status').textContent = t.sessionAlreadyUsed;
                        document.getElementById('status').className = 'status error';
                        document.getElementById('sendButton').disabled = true;
                        document.getElementById('urlInput').disabled = true;
                    }
                })
                .catch(error => {
                    console.log('Could not check session status:', error);
                });
        }

        // Validate session ID format (UUID)
        function isValidSessionFormat(sessionId) {
            const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
            return uuidRegex.test(sessionId);
        }

        // Check rate limiting
        function isRateLimited() {
            const now = Date.now();

            // Reset counter if enough time has passed
            if (now - lastAttemptTime > RATE_LIMIT_RESET_TIME) {
                submitAttempts = 0;
            }

            return submitAttempts >= MAX_ATTEMPTS_PER_SESSION;
        }

        // Validate URL for IPTV patterns and security
        function validateUrl(url) {
            try {
                const urlObj = new URL(url);

                // Must be HTTP or HTTPS
                if (!['http:', 'https:'].includes(urlObj.protocol)) {
                    return { valid: false, reason: t.onlyHttpAllowed };
                }

                // Block localhost and private IP ranges
                const blockedPatterns = [
                    'localhost', '127.0.0.1', '192.168.', '10.0.', '172.',
                    'file://', 'ftp://', 'javascript:', 'data:'
                ];

                const isBlocked = blockedPatterns.some(pattern =>
                    url.toLowerCase().includes(pattern)
                );

                if (isBlocked) {
                    return { valid: false, reason: t.localhostBlocked };
                }

                // Check for IPTV patterns (warn but allow)
                const iptvPatterns = ['.m3u', '.m3u8', 'get.php', 'player_api.php', 'output=ts', 'type=m3u'];
                const hasIptvPattern = iptvPatterns.some(pattern =>
                    url.toLowerCase().includes(pattern)
                );

                return {
                    valid: true,
                    hasIptvPattern: hasIptvPattern,
                    reason: hasIptvPattern ? t.validIptvUrl : t.urlAccepted
                };

            } catch (e) {
                return { valid: false, reason: t.invalidUrlFormat };
            }
        }

        // Function to switch between input types
        window.switchInputType = function(type) {
            // Update active button
            document.getElementById('urlBtn').classList.toggle('active', type === 'url');
            document.getElementById('xtreamBtn').classList.toggle('active', type === 'xtream');

            // Show/hide sections
            document.getElementById('urlSection').classList.toggle('active', type === 'url');
            document.getElementById('xtreamSection').classList.toggle('active', type === 'xtream');
        };

        // Function to convert Xtream Codes to IPTV URL
        function convertXtreamToUrl(server, username, password) {
            // Remove trailing slash from server if present
            server = server.replace(/\/$/, '');

            // Build Xtream Codes API URL for M3U playlist
            // Format: http://server:port/get.php?username=XXX&password=XXX&type=m3u_plus&output=ts
            return `${server}/get.php?username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}&type=m3u_plus&output=ts`;
        }

        // Function to validate URL by making a HEAD request
        async function validateUrlReachability(url) {
            try {
                // Use a timeout to avoid hanging
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout

                const response = await fetch(url, {
                    method: 'HEAD', // Only get headers, not content
                    signal: controller.signal,
                    mode: 'no-cors' // Allow cross-origin requests
                });

                clearTimeout(timeoutId);

                // For no-cors mode, we can't read the status
                // But if the request doesn't throw, it means the server responded
                return { success: true, status: 'reachable', message: 'Server is reachable' };
            } catch (error) {
                if (error.name === 'AbortError') {
                    return { success: false, status: 'timeout', message: 'Request timed out' };
                }
                return { success: false, status: 'error', message: error.message };
            }
        }

        // Global function for sending URL to Firebase
        window.sendUrl = async function() {
            const urlInput = document.getElementById('urlInput');
            const sendButton = document.getElementById('sendButton');
            const status = document.getElementById('status');

            // Determine which input type is active
            const isXtreamMode = document.getElementById('xtreamSection').classList.contains('active');
            let url = '';

            if (isXtreamMode) {
                // Get Xtream Codes inputs
                const serverUrl = document.getElementById('serverInput').value.trim();
                const username = document.getElementById('usernameInput').value.trim();
                const password = document.getElementById('passwordInput').value.trim();

                // Validate Xtream inputs
                if (!serverUrl || !username || !password) {
                    status.textContent = t.invalidXtream;
                    status.className = 'status error';
                    return;
                }

                // Convert Xtream Codes to IPTV URL
                status.textContent = t.converting;
                status.className = 'status info';
                url = convertXtreamToUrl(serverUrl, username, password);
                console.log('Converted Xtream Codes to URL:', url);

                // Validate the generated URL
                status.textContent = t.validatingUrl;
                const validation = await validateUrlReachability(url);

                if (!validation.success) {
                    let errorMessage = t.serverNotResponding;
                    if (validation.status === 'timeout') {
                        errorMessage = t.urlValidationFailed + 'Connection timeout';
                    } else if (validation.message) {
                        errorMessage = t.urlValidationFailed + validation.message;
                    }

                    status.textContent = errorMessage;
                    status.className = 'status error';
                    sendButton.disabled = false;
                    sendButton.textContent = t.sendButton;
                    return;
                }

                status.textContent = t.urlValidated;
                await new Promise(resolve => setTimeout(resolve, 1000)); // Show success for 1 second
            } else {
                // Get direct URL input
                const urlInput = document.getElementById('urlInput');
                url = urlInput.value.trim();
            }

            // Rate limiting check
            if (isRateLimited()) {
                status.textContent = t.rateLimited + ' ' + Math.ceil((RATE_LIMIT_RESET_TIME - (Date.now() - lastAttemptTime)) / 1000) + ' ' + t.seconds;
                status.className = 'status warning';
                return;
            }

            if (!url) {
                status.textContent = t.enterUrl;
                status.className = 'status error';
                return;
            }

            // Validate URL
            const validation = validateUrl(url);
            if (!validation.valid) {
                status.textContent = t.invalidUrl + validation.reason;
                status.className = 'status error';
                return;
            }

            // Show warning for non-IPTV URLs
            if (!validation.hasIptvPattern) {
                const proceed = confirm(t.noIptvWarning);
                if (!proceed) return;
            }

            // Update rate limiting
            submitAttempts++;
            lastAttemptTime = Date.now();

            // Send URL to Firebase Realtime Database
            try {
                sendButton.disabled = true;
                sendButton.innerHTML = '<span class="loading"></span> ' + t.checkingSession;
                status.textContent = t.checkingSession;
                status.className = 'status info';

                // First check if session has already been consumed
                const checkResponse = await fetch(`https://weargb-default-rtdb.firebaseio.com/url-sessions/${sessionId}.json`);
                if (checkResponse.ok) {
                    const sessionData = await checkResponse.json();
                    if (sessionData && sessionData.consumed === true) {
                        status.textContent = t.sessionAlreadyUsed;
                        status.className = 'status error';
                        sendButton.disabled = false;
                        sendButton.textContent = t.sendButton;
                        return;
                    }
                }

                sendButton.innerHTML = '<span class="loading"></span> ' + t.sending;
                status.textContent = t.sendingToDevice;

                // Write to Firebase with session ID as key (using url-sessions path like wearGB)
                console.log('ğŸ”¥ Attempting Firebase write to session:', sessionId);
                console.log('ğŸ”¥ URL to send:', url);

                await set(ref(database, `url-sessions/${sessionId}`), {
                    url: url,
                    timestamp: Date.now(),
                    consumed: false,
                    userAgent: navigator.userAgent.substring(0, 100), // Limited info for debugging
                    iptvValidation: validation.hasIptvPattern
                });

                console.log('âœ… Firebase write successful for session:', sessionId);

                status.textContent = t.successMessage;
                status.className = 'status success';

                // Auto-close after 3 seconds
                setTimeout(() => {
                    try {
                        window.close();
                    } catch (e) {
                        // If we can't close (some browsers block this), show message
                        status.textContent = t.successClose;
                    }
                }, 3000);

            } catch (error) {
                console.error('âŒ Error sending URL to Firebase:', error);
                console.error('âŒ Error details:', {
                    name: error.name,
                    message: error.message,
                    code: error.code,
                    stack: error.stack
                });
                status.textContent = t.errorSending + ' (' + error.message + ')';
                status.className = 'status error';
                sendButton.disabled = false;
                sendButton.textContent = t.sendButton;
            }
        };

        // Initialize UI with translations
        document.addEventListener('DOMContentLoaded', function() {
            // Update all text content with translations
            document.querySelector('h1').textContent = t.title;
            document.querySelector('.subtitle').textContent = t.subtitle;

            // Direct URL section
            document.querySelector('label[for="urlInput"]').textContent = t.urlLabel;
            document.getElementById('urlInput').placeholder = t.urlPlaceholder;

            // Xtream Codes section
            document.getElementById('directUrlLabel').textContent = t.directUrl;
            document.getElementById('xtreamCodesLabel').textContent = t.xtreamCodes;
            document.getElementById('serverLabel').textContent = t.serverUrl;
            document.getElementById('serverInput').placeholder = t.serverUrlPlaceholder;
            document.getElementById('usernameLabel').textContent = t.username;
            document.getElementById('usernameInput').placeholder = t.usernamePlaceholder;
            document.getElementById('passwordLabel').textContent = t.password;
            document.getElementById('passwordInput').placeholder = t.passwordPlaceholder;

            document.getElementById('sendButton').textContent = t.sendButton;
            document.querySelector('.rate-limit-notice').innerHTML = t.spamProtection;
            document.querySelector('.examples h3').textContent = t.supportedFormats;
            const formatItems = document.querySelectorAll('.examples ul li');
            formatItems[0].textContent = t.format1;
            formatItems[1].textContent = t.format2;
            formatItems[2].textContent = t.format3;
            formatItems[3].textContent = t.format4;
            document.querySelector('.examples > div').innerHTML = t.legalNotice;

            // Auto-focus the URL input for better UX
            document.getElementById('urlInput').focus();
        });

        // Enable Enter key to submit for all inputs
        ['urlInput', 'serverInput', 'usernameInput', 'passwordInput'].forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendUrl();
                    }
                });
            }
        });

        // Log session info for debugging (limited info only)
        console.log('IPTV URL Input - Session:', sessionId ? sessionId.substring(0, 8) + '...' : 'none');
        console.log('Firebase initialized successfully');
        console.log('Language:', currentLang);
    </script>
</body>
</html>